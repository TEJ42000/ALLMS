{# User header component for all pages #}
{# Usage: {% include "partials/user_header.html" %} #}
{# Expects: user object with email, domain, is_admin properties #}

{% if user %}
<div class="user-header" style="
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 0.5rem;
    backdrop-filter: blur(8px);
">
    {# User avatar - Google profile image or first letter #}
    {% if user.picture %}
    <img 
        src="{{ user.picture }}" 
        alt="Profile" 
        class="user-avatar-img"
        style="
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
        "
        referrerpolicy="no-referrer"
    >
    {% else %}
    <div class="user-avatar" style="
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(135deg, #3b82f6, #8b5cf6);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 1rem;
        border: 2px solid rgba(255, 255, 255, 0.3);
    ">
        {{ (user.email[0] if user.email else '?')|upper }}
    </div>
    {% endif %}
    
    {# User email and role badge #}
    <div class="user-details" style="display: flex; flex-direction: column; gap: 0.125rem;">
        <span class="user-email" style="
            font-size: 0.875rem;
            color: #f4f4f5;
            font-weight: 500;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        ">
            {{ user.email }}
        </span>
        
        <div style="display: flex; gap: 0.5rem; align-items: center;">
            {% if user.is_admin %}
            <span class="user-badge admin-badge" style="
                font-size: 0.625rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                color: #22c55e;
                font-weight: 600;
                background: rgba(34, 197, 94, 0.15);
                padding: 0.125rem 0.375rem;
                border-radius: 0.25rem;
            ">
                âœ“ Admin
            </span>
            {% else %}
            <span class="user-badge" style="
                font-size: 0.625rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                color: #94a3b8;
                font-weight: 500;
            ">
                {{ user.domain }}
            </span>
            {% endif %}
        </div>
    </div>
</div>
{% endif %}

