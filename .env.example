# LLS Study Portal - Environment Variables

# Anthropic API Key (required)
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Google Cloud Project (for deployment)
GCP_PROJECT_ID=vigilant-axis-483119-r8
GCP_REGION=europe-west4

# Application Settings
APP_NAME=lls-study-portal
PORT=8080

# Development Settings
DEBUG=False
LOG_LEVEL=INFO

# ECHR Case Law Database
# Directory for ECHR case law cache (SQLite database)
# Default: data/echr_cache
ECHR_CACHE_DIR=data/echr_cache

# ============================================================================
# GDPR & Security Settings
# ============================================================================

# GDPR Token Secret (REQUIRED for production)
# Used for generating secure tokens for account deletion, email verification, etc.
# Generate with: python3 -c "import secrets; print(secrets.token_hex(32))"
# IMPORTANT: Keep this secret! Never commit to version control!
# In production, store in Google Secret Manager
# GDPR_TOKEN_SECRET=your-64-character-hex-secret-here

# CSRF Protection - Allowed Origins (REQUIRED for production)
# Comma-separated list of allowed origins for file uploads and API requests
# Example: https://allms.app,https://www.allms.app
# Default: localhost origins (for development)
# ALLOWED_ORIGINS=https://allms.app,https://www.allms.app

# Rate Limiting Backend
# Options: memory (dev), redis (prod), database
# Default: memory
RATE_LIMIT_BACKEND=memory

# Redis Configuration (if RATE_LIMIT_BACKEND=redis)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# REDIS_SSL=false

# Email Service Provider (for GDPR confirmation emails)
# Options: console (dev), sendgrid, ses, smtp
# Default: console
EMAIL_SERVICE_PROVIDER=console

# SendGrid Configuration (if EMAIL_SERVICE_PROVIDER=sendgrid)
# SENDGRID_API_KEY=your-sendgrid-api-key

# ============================================================================
# Authentication Settings (Google IAP)
# ============================================================================
#
# The application uses Google Cloud Identity-Aware Proxy (IAP) for authentication.
# See docs/AUTHENTICATION.md for detailed information.
#
# For local development: Set AUTH_ENABLED=false to use mock user mode
# For production: Set AUTH_ENABLED=true and configure IAP (see docs/IAP-SETUP.md)
#

# Enable/disable authentication
# - true: Production mode with IAP authentication (requires IAP setup)
# - false: Development mode with mock user (no IAP required)
# Default: true
AUTH_ENABLED=false

# Primary allowed domain
# Users with this email domain have full access to the application.
# Admin endpoints require this domain.
# Default: mgms.eu
AUTH_DOMAIN=mgms.eu

# Google OAuth Client ID (REQUIRED in production when AUTH_ENABLED=true)
# Get this from: Google Cloud Console > APIs & Services > Credentials
# Create an OAuth 2.0 Client ID for Web Application
# Example: 123456789-abcdefghijklmnop.apps.googleusercontent.com
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com

# IAP Audience (optional, auto-detected if not set)
# Format: /projects/PROJECT_NUMBER/apps/PROJECT_ID
# Only needed if auto-detection fails
# IAP_AUDIENCE=/projects/123456789/apps/your-project-id

# ============================================================================
# Mock User Settings (LOCAL DEVELOPMENT ONLY)
# ============================================================================
#
# These settings are ONLY used when AUTH_ENABLED=false
# They configure the mock user for local development and testing
#

# Mock user email address
# - Use @mgms.eu for admin access (can access /api/admin/* endpoints)
# - Use other domains to test regular user access
# Examples:
#   - dev@mgms.eu (admin user)
#   - student@university.edu (regular user)
#   - guest@external.com (external user, simulates allow list)
AUTH_MOCK_USER_EMAIL=dev@mgms.eu

# Mock user admin status
# - true: User has admin privileges (can access admin endpoints)
# - false: Regular user (cannot access admin endpoints)
# Note: Admin status is automatically true for @mgms.eu domain users
AUTH_MOCK_USER_IS_ADMIN=true

# ============================================================================
# Authentication Quick Reference
# ============================================================================
#
# Local Development (no IAP):
#   AUTH_ENABLED=false
#   AUTH_MOCK_USER_EMAIL=dev@mgms.eu
#   AUTH_MOCK_USER_IS_ADMIN=true
#
# Production (with IAP):
#   AUTH_ENABLED=true
#   AUTH_DOMAIN=mgms.eu
#   GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
#
# See documentation:
#   - docs/AUTHENTICATION.md - Architecture overview
#   - docs/IAP-SETUP.md - Production IAP setup
#   - docs/LOCAL-DEVELOPMENT.md - Local development guide
#   - docs/ALLOW-LIST-MANAGEMENT.md - Managing external users
#
